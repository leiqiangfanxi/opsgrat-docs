
更新日志
========================

2.5
------------------------

**发布日期：**

2020年3月24号

**新增功能：**

- 一致性检测模板，对主机、硬件、软件进行检测获取重要指标
- 主机清单和模板增加一致性检测

**优化功能：**

- 对接CAS服务
- 工作流作业会生成自己的节点，工作流模板修改之后保留原工作流的执行内容
- logo替换

**Bug修复：**

- 搜索栏悬浮的时候在某些场景下会一直跳动
- 搜索栏悬浮的时候表格位置不对会遮盖部分数据
- 工作流设计页面节点拖拽进来后位置不对

**升级依赖：**

- 从2.4版本升级到2.5需要升级数据库，数据库升级文件为opsgrat项目目录下docs/version2.5.sql，从更早版本升级需要升级对应版本的数据库
- python依赖包：

::

   1、django-cas-ng


2.4.2
-------------------------

**发布日期：**

2020年1月7号

**问题修复：**

- 只有一级的菜单选中不会变成蓝色问题修复

2.4.1
--------------------------

**发布日期：**

2019年12月19号

**新增功能：**

- 工作流可以从某个节点开始执行，不必每次从头执行到尾
- 工作流可以从某个节点重新执行 

**优化功能：**

- 工作流编辑页面两侧可以点击收 
- 工作流编辑页面点击节点编辑按钮可以将缩进去的表单展示出来
- 工作流作业日志页面样式修改
- API文档补全

**Bug修复：**

- 页面重复引用部分js和css问题修复
- 高级搜索栏在一些场景下悬浮功能会不断跳动的bug修复
- 工作流节点位置显示偏差的问题修复
- 工作流编辑页面节点表单模板类型与模板下拉框无法二级联动bug修复

2.4
--------------------------

**发布日期：**

2019年12月6号

**新增功能：**

- 新增新手引导：用户首次登录系统右上方会出现蓝色闪烁样式引导用户使用新手引导
- 增加意见反馈功能，用户可以将意见反馈提交到官网后台
- 增加取消运行中的作业功能
- 主机清单、分组、主机页面增加刷新状态功能，点击可以刷新主机的连接状态
- 主机页面点击主机名可以打开该主机清单的当前主机执行的作业页面
- 主机清单分组、主机页面增加快速启用/禁用功能

**改进优化：**

- 工作流编辑页面样式优化
- 工作流作业日志页面动态刷新不reload整个页面
- 计划任务执行时间、结束时间显示优化
- 不展示间隔时间、间隔类型、cron等字段，增加显示模板类型字段
- 主机来源页面展示逻辑优化
- 给分组添加自分组页面过滤分组自身和所有父分组
- 添加子分组选择页面增加搜索栏
- 多个错误提示弹窗合并成一个
- 添加来源页面，已输入内容关闭或取消后内容清空
- 添加主机清单中添加凭据步骤，“使用”按钮不弹出二次确认
- 主机清单编辑模态框增加凭据选择
- 添加主机清单流程，添加凭据步骤中，凭据列表页面增加修改凭据功能
- 添加凭据步骤新增取消按钮
- 主机页面新增高级筛选，可以根据主机状态多选
- 分组和主机页面点击状态按钮跳转到主机列表页面，根据状态筛选对应的主机
- 主机列表页面在主机名前面新增主机清单和分组字段
- 主机列表页面新增按分组高级筛选
- 首页增加面包屑导航
- 错误主机页面增加面包屑导航和搜索栏，可以按主机清单和分组筛选
- 错误主机页面“主机名称”之前增加“主机清单”、“分组”字段
- 工作流连线上的运行结果选择改成多选
- 模板通知设置的运行结果选择改成多选
- Dashboard和首页趋势图x轴日期只显示月和日
- 柱状图x轴模板名称45度倾斜显示，最多展示9个字符
- License页面UI优化
- 作业列表api改成可以传入is_job_none参数判断筛选job_id字段为空的数据
- playbook执行、快速命令、新增和修改模板页面字段顺序调整，并且选择主机清单后可以自动带出该主机清单的凭据
- 页面上所有“外部参数”都改成“额外变量”
- 主机清单、分组、主机中的“参数”都改成对应的“xx变量”
- 模板通知设置页面增加运行结果筛选

**Bug修复：**

- 进入主机清单列表中，路线显示不正确，且不能点击跳转问题修复
- hostname前后去空格
- 作业设置页面中“项目名称”改成单选
- 添加主机清单页面面包屑导航距离下方的像素不对的问题修复
- 模板通知设置页面风格统一成和现在的一样
- 团队管理，团队成员icon改成多个用户的icon
- 项目管理授权页面和主机清单授权页面去掉上方的“/”
 
**升级依赖：**

- 从2.3版本升级到2.4需要升级数据库，数据库升级文件为opsgrat项目目录下docs/version2.4.sql，从更早版本升级需要升级对应版本的数据库

2.3.4
------------------------

**发布日期：**

2019年11月25号

**Bug修复：**

- 作业设置页面项目名称改成非必输
- 主机清单新增页面，数据校验不通过刷新页面导致填写数据丢失问题解决
- yaml格式字段验证错误返回内容增加返回字段名称

2.3.3
------------------------

**发布日期：**

2019年11月12号

**新增功能：**

- 右上角用户名称下拉菜单增加icon和显示系统当前版本菜单

2.3.2
------------------------

**发布日期：**

2019年11月12号

**Bug修复：**

- License导入页面报错的问题修复

**功能改进：**

- Windows AD配置由settings.py文件中增加配置改成从sso api中读取ldap类型来判断动态添加配置

2.3.1
-------------------------

**发布日期：**

2019年11月6号

**Bug修复：**

- 右侧菜单栏无法上下滚动的问题修复
- 首页数字栏查询作业数据错误问题修复
- 环境变量管理无法修改数据问题修复

2.3
-------------------------

**发布日期：**

2019年11月1号

**新增功能：**

- 增加语音交互，可以通过语音搜索模板并通过确认命令执行对应模板
- 首页数字栏位点击可以跳转到对应的页面
- 增加多级面包屑导航
- 工作流支持节点分支，即一个节点作业执行完成后可以并发执行多个其他作业
- 工作流节点支持分支合并，即一个节点是否执行依赖前面多个节点的执行结果
- 增加环境变量管理，作业执行的时候可以读取用户在系统中设置的环境变量

**改进功能：**

- 散点图时间跨度改成前后1个小时，中间的时间线改成文本改为“现在”
- 作业次数统计增加开始日期、结束日期以及主机清单筛选
- 作业次数统计页面“作业每天执行次数图表”文本改成“作业趋势”，作业趋势图增加每天执行作业总次数
- 作业成功率图表，当然如果没有执行任务成功率改成显示100%
- 模板排名统计页面增加筛选条件（同作业次数统计页面）
- 高级筛选框增加页面下拉的时候悬浮功能
- 凭据管理、项目管理、主机清单、模板管理、工作流管理、计划任务等页面单条数据授权功能交互改成弹出模态框而不是打开新的页面
- 团队管理页面修改团队模态框改成不能修改改成员，操作列后面增加成员管理，可以弹出模态框展示该团队成员列表并可以对成员进行增、删、改、查
- 所有页面的表格上的操作按钮改成居左显示
- OpsGrat不连接SSO数据库，使用自己的用户表
- 登录认证和API Token认证使用SSO API获取用户信息并更新本地用户数据

**Bug修复：**

- 首页操作日志列表多次点击右侧向上按钮翻页会出现空白内容的问题修复
- 模板新增/修改页面、快速命令、Playbook执行等页面上方操作按钮不会悬浮的bug修复
- 主机清单管理为分组添加自分组会导致分组错乱的问题修复
- 主机清单分组页面没有添加主机按钮问题修复

**升级依赖：**

- 从2.2版本升级到2.3需要升级数据库，数据库升级文件为opsgrat项目目录下docs/version2.3.sql，从更早版本升级需要升级对应版本的数据库
- python依赖包：

::

   1、dwebsocket
   2、eventlet
   3、gevent
   4、websocket-client
   5、alibabacloud-nls-python-sdk：安装方式见官方文档（https://help.aliyun.com/document_detail/120698.html?spm=a2c4g.11174283.6.577.19d87275ZKeKal）


2.2.1
-------------------------

**发布日期：**

2019年10月21号

**Bug修复：**

- 执行作业的时候会获取禁用的主机bug修复
- 创建主机清单结果页面单个主机刷新不会停止bug修复
- 部分页面输入框没有提示信息修复
- 凭据管理多出执行权限问题修复
- 授权功能按钮名称显示错误bug修复
- 项目管理查询少掉一个项目bug修复
- 作业日志页面执行人不现实bug修复
- 登录页面移动端下样式错乱bug修复
- 作业日志页面在部分浏览器下报错的问题修复
- 作业日志“重试按钮”在部分浏览器下无法显示的问题修复
- 凭据管理页面操作列缺少权限管理按钮的问题修复

2.2
-------------------------

**发布日期：**

2019年9月23号

**新增功能：**

- 首页增加最近执行作业和即将执行作业散点图
- 首页增加用户最新操作日志
- 作业统计页面下方增加成功率趋势图
- 模板排名统计页面下方增加错误模板排名柱状图
- 主机清单增加凭据选择，可以指定该主机清单所使用的凭据

**系统优化：**

- 总体UI样式和页面布局优化
- 采用新的输入框和搜索组件
- 首页布局优化
- 创建主机清单交互流程修改，改成安步骤引导的方式，减少学习成本
- 工作流作业的流程图增加定时刷新
- 凭据管理中凭据类型和凭据名称优化
- 部分菜单名称改进

**升级依赖：**

- 从2.1版本升级到2.2需要升级数据库，数据库升级文件为opsgrat项目目录下docs/version2.2.sql


2.1
------------------------

**发布日期：**

2019年8月23号

**新增功能：**

- 通知管理增加自定义通知内容，自定义通知内容支持jinja2模板引擎
- 项目管理支持本地项目：项目管理除了可以从GitLab和SVN拉取Playbook之外还可以从本机项目目录中读取
- 作业管理增加失败主机重试功能

**升级依赖：**

- 从2.0版本升级到2.1需要升级数据库，数据库升级文件为opsgrat项目目录下docs/version2.1.sql
